$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var a=function(a){a.find("input[name=author_name]").val(""),a.find("input[name=author_email]").val(""),a.find("input[name=author_url]").val(""),a.find("textarea[name=body]").val("")},b=function(a){var b=$(".comment-success-alert"),c=$(".comment-error-alert"),d=$(".comment-spam-alert"),e=3e3;switch(a){case"success":b.show(),c.hide(),d.hide(),b.delay(e).fadeOut("slow");break;case"error":b.hide(),c.show(),d.hide(),c.delay(e).fadeOut("slow");break;case"spam":b.hide(),c.hide(),d.show(),d.delay(e).fadeOut("slow")}};$(document).on("submit",".form-new-comment",function(c){c.preventDefault();var d=$(this),e={postId:d.data("postid"),parent:d.data("parent"),authorName:d.find("input[name=author_name]").val(),authorEmail:d.find("input[name=author_email]").val(),authorUrl:d.find("input[name=author_url]").val(),body:d.find("textarea[name=body]").val()};return $.ajax({method:"post",url:"comment/store",data:e,success:function(c){0==c.error?e.parent?($(".comment-reply-container[data-comment='"+e.parent+"']").append(c.html),$(".reply-comment-form[data-in-reply-to='"+e.parent+"']").empty()):0==c.spam?($(".comments-container").append(c.html),b("success")):b("spam"):b("error"),a(d)},error:function(a){b("error")}}),!1}),$(document).on("click",".reply-comment-button",function(a){a.preventDefault();var b=$(this),c={parent:b.data("in-reply-to")};$.ajax({method:"get",url:"comment/getForm",data:c,success:function(a){a.error||$(".reply-comment-form[data-in-reply-to='"+c.parent+"']").append(a)}})})});